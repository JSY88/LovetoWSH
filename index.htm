<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ˜‰í–‰ë³µí•œ N-Backâ™¥ï¸</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <canvas></canvas>

    <!-- ğŸŒŸ ë©”ì¸ í™”ë©´ -->
    <div id="titleScreen">
        <div id="uploadingMessage" style="color: lightgreen; margin-top: 10px;"></div>
        <h1>ğŸ˜‰í–‰ë³µí•œ N-Backâ™¥ï¸</h1>
        <div>Current Level: <span id="nBackLevel">1</span>-back</div>
        <div class="level-input">
            <label for="customLevel">Start at level: </label>
            <input type="number" id="customLevel" min="1" max="9" value="1">
            <button id="setLevelBtn">Set</button>
            <button id="lockLevelBtn">ê³ ì •</button>
        </div>
        <div></div>
        <div>í•˜ë£¨ 20ë¶„ì´ë©´ </div>
        <div>ê¸°ì–µë ¥ê³¼ ì •ì‹ ì  ì²´ë ¥ì´ ì¦ì§„ë¼ìš”</div>
        <div>í™”ì´íŒ…!</div>
        <div></div>

        <div class="main-buttons-container">
            <div id="pressSpace">Press SPACE to begin</div>
            <button id="openSettingsBtn">ì„¤ì •</button>
        </div>

        <div id="totalGamesTodayCounter">
            ì˜¤ëŠ˜ ê²Œì„ íšŸìˆ˜ <span id="totalGamesTodayCountValue">0</span>ë²ˆ
        </div>
    </div>

    <!-- ğŸ“Š ê²°ê³¼ í™”ë©´ -->
    <div id="resultScreen">
        <h1></h1>
        <div id="resultBackgroundImage"></div>
        <div id="stats">
            <div>Scene Errors: <span id="sceneErrors">0</span></div>
            <div>Location Errors: <span id="locationErrors">0</span></div>
            <div>Sound Errors: <span id="soundErrors">0</span></div>
            <div>Color Errors: <span id="colorErrors">0</span></div>
            <div>N-Back Level: <span id="resultNLevel">1</span></div>
            <div id="levelChange"></div>
        </div>
        <div id="pressSpaceResult">Press SPACE to continue</div>
        <div id="consecutiveGamesCounter">
            ì—°ì† ê²Œì„ íšŸìˆ˜ <span id="consecutiveGamesCount">0</span>ë²ˆ
        </div>
    </div>

    <!-- â¸ï¸ ì¼ì‹œì •ì§€ í™”ë©´ -->
    <div id="pauseScreen">
        <h2>ì ì‹œ ì‰¬ì–´ê°ˆê²Œìš”~</h2>
        <div class="pause-buttons">
            <button id="resumeGameBtn">ê³„ì†í•˜ê¸°</button>
            <button id="mainMenuBtn">ë©”ì¸ ë©”ë‰´</button>
        </div>
    </div>

    <!-- ğŸŒŸ ìê·¹ ì¸ë””ì¼€ì´í„° (ê²¹ì¹¨ ë°©ì§€ ìœ„í•´ ìœ„ì¹˜ ëª…í™•íˆ) -->
    <div id="scene-indicator" class="indicator-box">ëª¨ì–‘</div>
    <div id="sound-indicator" class="indicator-box">ì†Œë¦¬</div>
    <div id="color-indicator" class="indicator-box">ìƒ‰ìƒ</div>
    <div id="location-indicator" class="indicator-box">ìœ„ì¹˜</div>

    <div id="stimulus-counter">Stimulus: 0 / 30</div>

    <!-- ğŸ•¹ï¸ ê²Œì„ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
    <div id="gameControlButtons">
        <button id="pauseBtn" class="gameControlButton">â¸ï¸</button>
        <button id="fullscreenBtn" class="gameControlButton">Full</button>
    </div>

    <!-- âš™ï¸ ì„¤ì • íŒ¨ë„ -->
    <div id="settingsPanel">
    <h2>ì„¤ì •</h2>
    <!-- ì•„ì½”ë””ì–¸ ê·¸ë£¹ -->
    <div class="accordion">
        <button class="accordion-btn">ìê·¹ ì„¤ì •</button>
        <div class="accordion-content" style="display: none;">
            <div class="settings-group">
                <label>ìê·¹ ìœ í˜• ì„ íƒ (ìµœì†Œ 2ê°œ, ìµœëŒ€ 4ê°œ):</label>
                <div>
                    <input type="checkbox" id="sceneStimulus" value="scene" checked> <label for="sceneStimulus">ì¥ë©´ (ì´ë¯¸ì§€)</label><br>
                    <input type="checkbox" id="locationStimulus" value="location" checked> <label for="locationStimulus">ìœ„ì¹˜</label><br>
                    <input type="checkbox" id="soundStimulus" value="sound"> <label for="soundStimulus">ì†Œë¦¬</label><br>
                    <input type="checkbox" id="colorStimulus" value="color"> <label for="colorStimulus">ìƒ‰ìƒ</label>
                </div>
            </div>
            <div class="settings-group">
                <label>íƒ€ê²Ÿ ìƒì„± í™•ë¥  (0-1, í•©ê³„ â‰¤ 1):</label>
                <input type="number" id="sceneTargetProb" min="0" max="1" step="0.01" value="0.25"> <label for="sceneTargetProb">ì¥ë©´</label><br>
                <input type="number" id="locationTargetProb" min="0" max="1" step="0.01" value="0.25"> <label for="locationTargetProb">ìœ„ì¹˜</label><br>
                <input type="number" id="soundTargetProb" min="0" max="1" step="0.01" value="0.25"> <label for="soundTargetProb">ì†Œë¦¬</label><br>
                <input type="number" id="colorTargetProb" min="0" max="1" step="0.01" value="0.25"> <label for="colorTargetProb">ìƒ‰ìƒ</label>
            </div>
            <div class="settings-group">
                <label>í•œ ë¼ìš´ë“œ ìê·¹ ê°œìˆ˜ (10-100):</label>
                <input type="number" id="stimuliPerBlock" min="10" max="100" value="30"><br>
                <label>ìê·¹ ì œì‹œ ì§€ì†ì‹œê°„ (ms, 500-5000):</label>
                <input type="number" id="stimulusDuration" min="500" max="5000" step="100" value="1000"><br>
                <label>ìê·¹ ê°„ ê°„ê²© ì‹œê°„ (ms, 1000-10000):</label>
                <input type="number" id="stimulusInterval" min="1000" max="10000" step="100" value="2500">
            </div>
        </div>
    </div>
    <div class="accordion">
        <button class="accordion-btn">ë¦¬ì†ŒìŠ¤ ì„¤ì •</button>
        <div class="accordion-content" style="display: none;">
            <div class="settings-group">
                <label>ì´ë¯¸ì§€ ì†ŒìŠ¤ URL (í´ë” ê²½ë¡œ):</label>
                <input type="text" id="imageSourceUrl" value="images/" placeholder="ì˜ˆ: images/">
            </div>
            <div class="settings-group">
                <label>ê²°ê³¼ ë°°ê²½ ì´ë¯¸ì§€ URL:</label>
                <input type="text" id="resultImageUrl" value="" placeholder="URL ì…ë ¥">
            </div>
            <div class="settings-group">
                <label>ì‚¬ìš´ë“œ ì†ŒìŠ¤:</label>
                <select id="soundSourceSelect">
                    <option value="soundFiles">URL (íŒŒì¼)</option>
                    <option value="pianoTones" selected>í•©ì„± í”¼ì•„ë…¸ìŒ</option>
                </select><br>
                <label>ì‚¬ìš´ë“œ URL (í´ë” ê²½ë¡œ):</label>
                <input type="text" id="soundSourceUrl" value="sounds/" placeholder="ì˜ˆ: sounds/">
            </div>
        </div>
    </div>
    <div class="accordion">
        <button class="accordion-btn">ë‹¨ì¶•í‚¤ ì„¤ì •</button>
        <div class="accordion-content" style="display: none;">
            <div class="settings-group">
                <label>ë‹¨ì¶•í‚¤ ì„¤ì •:</label><br>
                <input type="text" id="sceneKey" maxlength="1" value="K" placeholder="ì¥ë©´ ë‹¨ì¶•í‚¤"> ì¥ë©´<br>
                <input type="text" id="locationKey" maxlength="1" value="A" placeholder="ìœ„ì¹˜ ë‹¨ì¶•í‚¤"> ìœ„ì¹˜<br>
                <input type="text" id="soundKey" maxlength="1" value="L" placeholder="ì†Œë¦¬ ë‹¨ì¶•í‚¤"> ì†Œë¦¬<br>
                <input type="text" id="colorKey" maxlength="1" value="S" placeholder="ìƒ‰ìƒ ë‹¨ì¶•í‚¤"> ìƒ‰ìƒ
            </div>
        </div>
    </div>
    <div class="accordion">
        <button class="accordion-btn">ê°„ì„­ ì„¤ì •</button>
        <div class="accordion-content" style="display: none;">
            <div class="settings-group">
                <input type="checkbox" id="enableInterference" checked> <label for="enableInterference">ê°„ì„­ í™œì„±í™”</label><br>
                <input type="checkbox" id="adaptiveInterference" checked> <label for="adaptiveInterference">ì ì‘í˜• ê°„ì„­</label><br>
                <label>ê¸°ë³¸ ê°„ì„­ í™•ë¥  (0-1):</label>
                <input type="number" id="baseInterferenceChance" min="0" max="1" step="0.1" value="0.4"><br>
                <label>ì ì‘í˜• ìƒí•œ ì„ê³„ê°’ (0-1):</label>
                <input type="number" id="thresholdHigh" min="0" max="1" step="0.1" value="0.8"><br>
                <label>ì ì‘í˜• í•˜í•œ ì„ê³„ê°’ (0-1):</label>
                <input type="number" id="thresholdLow" min="0" max="1" step="0.1" value="0.5"><br>
                <label>ê°„ì„­ ìœ í˜• í™•ë¥  (í•©ê³„ â‰¤ 1):</label><br>
                <input type="number" id="previousChance" min="0" max="1" step="0.1" value="0.25"> <label for="previousChance">ì´ì „</label><br>
                <input type="number" id="cyclicChance" min="0" max="1" step="0.1" value="0.25"> <label for="cyclicChance">ì£¼ê¸°ì </label><br>
                <input type="number" id="nextChance" min="0" max="1" step="0.1" value="0.1"> <label for="nextChance">ë‹¤ìŒ</label><br>
                <input type="number" id="nearMissShortChance" min="0" max="1" step="0.1" value="0.25"> <label for="nearMissShortChance">ê·¼ì†Œ ì°¨ì´ (ì§§ìŒ)</label><br>
                <input type="number" id="nearMissLateChance" min="0" max="1" step="0.1" value="0.15"> <label for="nearMissLateChance">ê·¼ì†Œ ì°¨ì´ (ëŠ¦ìŒ)</label><br>
                <label>ì†ì„±ë³„ ê°„ì„­ í™•ë¥ :</label><br>
                <input type="number" id="imageAttrChance" min="0" max="1" step="0.1" value="0.3"> <label for="imageAttrChance">ì´ë¯¸ì§€</label><br>
                <input type="number" id="locationAttrChance" min="0" max="1" step="0.1" value="0.2"> <label for="locationAttrChance">ìœ„ì¹˜</label><br>
                <input type="number" id="soundAttrChance" min="0" max="1" step="0.1" value="0.4"> <label for="soundAttrChance">ì†Œë¦¬</label><br>
                <input type="number" id="colorAttrChance" min="0" max="1" step="0.1" value="0.3"> <label for="colorAttrChance">ìƒ‰ìƒ</label><br>
                <label>ìµœëŒ€ ê°„ì„­ ì†ì„± ìˆ˜ (1-4):</label>
                <input type="number" id="maxAttributes" min="1" max="4" value="2">
            </div>
        </div>
    </div>
    <div class="accordion">
        <button class="accordion-btn">UI ì„¤ì •</button>
        <div class="accordion-content" style="display: none;">
            <div class="settings-group">
                <label>ë²„íŠ¼ ìœ„ì¹˜ ì¡°ì • (px):</label><br>
                <input type="number" id="button1Left" value="30" style="width: 50px;">,
                <input type="number" id="button1Bottom" value="40" style="width: 50px;"> (ì¥ë©´)<br>
                <input type="number" id="button2Left" value="130" style="width: 50px;">,
                <input type="number" id="button2Bottom" value="40" style="width: 50px;"> (ì†Œë¦¬)<br>
                <input type="number" id="button3Right" value="130" style="width: 50px;">,
                <input type="number" id="button3Bottom" value="40" style="width: 50px;"> (ìœ„ì¹˜)<br>
                <input type="number" id="button4Right" value="30" style="width: 50px;">,
                <input type="number" id="button4Bottom" value="40" style="width: 50px;"> (ìƒ‰ìƒ)
            </div>
            <div class="settings-group">
                <label>ë²„íŠ¼ ë°°ê²½ìƒ‰:</label>
                <input type="color" id="buttonBgColor" value="#ffffff"><br>
                <label>ë°°ê²½ íˆ¬ëª…ë„ (0-1):</label>
                <input type="number" id="buttonBgOpacity" min="0" max="1" step="0.1" value="0.1" style="width: 50px;"><br>
                <label>í…ìŠ¤íŠ¸ ìƒ‰ìƒ:</label>
                <input type="color" id="buttonTextColor" value="#ffffff"><br>
                <label>í…ìŠ¤íŠ¸ íˆ¬ëª…ë„ (0-1):</label>
                <input type="number" id="buttonTextOpacity" min="0" max="1" step="0.1" value="0.0" style="width: 50px;">
            </div>
            <div class="settings-group">
                <label>ë²„íŠ¼ í¬ê¸° (width, height, px):</label><br>
                <input type="number" id="buttonWidth" value="80" style="width: 50px;">,
                <input type="number" id="buttonHeight" value="80" style="width: 50px;">
            </div>
        </div>
    </div>
    <div class="settings-buttons">
        <button id="applySettingsBtn">ì ìš©</button>
        <button id="closeSettingsBtn">ë‹«ê¸°</button>
    </div>
    <div id="settingsError"></div>
</div>

    <script src="ajax/libs/three.js/r128/three.min.js"></script>
    <script src="nback.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'922419878ca91803',t:'MTc0MjI5NDI5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
